<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SheebuTech Pro ‚Äî Ultimate Photo Tools</title>
    <meta name="description" content="Professional Photo Resizer & Editor by SheebuTech. Resize, Crop, and optimize images for Sarkari Exams securely offline.">
    <meta name="theme-color" content="#0f172a">
    
    <style>
        /* --- 1. MODERN VARIABLES & THEME --- */
        :root {
            --bg-body: #0f172a;       /* Deep Navy */
            --bg-card: rgba(30, 41, 59, 0.7); /* Glass Effect */
            --primary: #38bdf8;       /* Electric Blue */
            --primary-glow: rgba(56, 189, 248, 0.4);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --border: rgba(255, 255, 255, 0.1);
            --success: #22c55e;
            --radius: 16px;
            --font-main: system-ui, -apple-system, sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-main);
            background: var(--bg-body);
            background-image: radial-gradient(circle at 10% 20%, rgba(56, 189, 248, 0.1) 0%, transparent 20%),
                              radial-gradient(circle at 90% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 20%);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            padding-bottom: 80px;
        }

        /* --- 2. HEADER & BRANDING --- */
        header {
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 23, 42, 0.85);
        }

        .brand-logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(to right, #38bdf8, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .tagline { font-size: 0.85rem; color: var(--text-muted); margin-top: 4px; }

        /* --- 3. NAVIGATION TABS (Neumorphic) --- */
        .tabs-container {
            display: flex;
            justify-content: center;
            padding: 15px;
            gap: 10px;
        }

        .tab-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: var(--primary);
            color: #000;
            border-color: var(--primary);
            box-shadow: 0 0 15px var(--primary-glow);
        }

        /* --- 4. MAIN CARD DESIGN (Glassmorphism) --- */
        .container { max-width: 600px; margin: 0 auto; padding: 0 15px; }

        .tool-section {
            display: none;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .tool-section.active { display: block; }

        .card {
            background: var(--bg-card);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 24px;
        }

        /* --- 5. UPLOAD ZONE --- */
        .upload-zone {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255,255,255,0.02);
        }
        .upload-zone:hover, .upload-zone:active {
            border-color: var(--primary);
            background: rgba(56, 189, 248, 0.05);
        }
        .upload-icon { font-size: 2.5rem; margin-bottom: 10px; display: block; }
        .upload-text { font-weight: 600; color: var(--primary); }

        /* --- 6. CONTROLS & INPUTS --- */
        .control-group { margin-bottom: 20px; }
        .control-label {
            display: flex; justify-content: space-between;
            font-size: 0.9rem; margin-bottom: 8px; color: var(--text-muted);
        }
        
        input[type="number"], select, input[type="text"] {
            width: 100%;
            padding: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        input:focus, select:focus {
            outline: none; border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.2);
        }

        /* Sliders */
        input[type="range"] {
            width: 100%; height: 6px; background: #334155;
            border-radius: 5px; -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 20px; height: 20px;
            border-radius: 50%; background: var(--primary);
            cursor: pointer; box-shadow: 0 0 10px var(--primary-glow);
        }

        /* --- 7. BUTTONS --- */
        .btn {
            width: 100%; padding: 16px; border: none; border-radius: 12px;
            font-size: 1rem; font-weight: 700; cursor: pointer;
            transition: transform 0.1s; display: flex;
            align-items: center; justify-content: center; gap: 8px;
        }
        .btn:active { transform: scale(0.97); }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), #2563eb);
            color: white;
            box-shadow: 0 4px 15px var(--primary-glow);
        }
        
        .btn-download {
            background: linear-gradient(135deg, var(--success), #16a34a);
            color: white; margin-top: 15px;
            text-decoration: none;
        }

        /* --- 8. PREVIEW & CROP --- */
        .preview-box {
            margin-top: 20px; padding: 15px;
            background: rgba(0,0,0,0.3); border-radius: 12px;
            text-align: center; display: none;
        }
        .preview-img { max-width: 100%; border-radius: 8px; }
        
        #crop-area { margin-top: 15px; display: none; }
        canvas { max-width: 100%; border: 1px solid var(--border); touch-action: none; }

        /* --- 9. TOAST NOTIFICATION --- */
        .toast {
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(15, 23, 42, 0.95);
            color: white; padding: 12px 24px; border-radius: 50px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000; font-size: 0.9rem; display: flex; gap: 8px;
        }
        .toast.show { transform: translateX(-50%) translateY(0); }

        /* Animations */
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        footer { text-align: center; font-size: 0.8rem; color: var(--text-muted); margin-top: 40px; }
        footer a { color: var(--primary); text-decoration: none; }
    </style>
</head>
<body>

    <header>
        <div class="brand-logo">Sheebu Tech</div>
        <div class="tagline">Smart Tools for Smart Students</div>
    </header>

    <div class="tabs-container">
        <button class="tab-btn active" onclick="switchTab('photo')">Photo</button>
        <button class="tab-btn" onclick="switchTab('sign')">Signature</button>
        <button class="tab-btn" onclick="switchTab('doc')">Document</button>
    </div>

    <main class="container">
        
        <section id="photo-panel" class="tool-section active">
            <div class="card">
                <div class="upload-zone" onclick="document.getElementById('p-input').click()">
                    <span class="upload-icon">üì∑</span>
                    <div class="upload-text">Upload Photo</div>
                    <div style="font-size:0.8rem; color:var(--text-muted); margin-top:5px;">Supports JPG, PNG</div>
                    <input type="file" id="p-input" hidden accept="image/*">
                </div>

                <div id="p-controls" style="display:none; margin-top: 20px;">
                    
                    <div class="control-group">
                        <label class="control-label">Exam Preset</label>
                        <select id="p-preset" onchange="applyPreset()">
                            <option value="">Custom Size</option>
                            <option value="ssc">SSC / Railway (3.5 x 4.5 cm)</option>
                            <option value="upsc">UPSC Civil Services</option>
                            <option value="neet">NEET / JEE</option>
                            <option value="pan">PAN Card</option>
                        </select>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="control-group">
                            <label class="control-label">Width (px)</label>
                            <input type="number" id="p-w" placeholder="W">
                        </div>
                        <div class="control-group">
                            <label class="control-label">Height (px)</label>
                            <input type="number" id="p-h" placeholder="H">
                        </div>
                    </div>

                    <div class="control-group" style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px;">
                        <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                            <input type="checkbox" id="crop-toggle" style="width:20px; height:20px;">
                            <span>Enable Manual Crop</span>
                        </label>
                        <div id="crop-area">
                            <canvas id="crop-canvas" width="300" height="300"></canvas>
                            <p style="font-size:0.8rem; color:var(--primary);">üí° Drag the box to adjust face.</p>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"><span>Quality (KB Reducer)</span> <span id="qual-val">80%</span></label>
                        <input type="range" id="p-qual" min="10" max="100" value="80" oninput="document.getElementById('qual-val').innerText = this.value + '%'">
                    </div>

                    <button class="btn btn-primary" onclick="processPhoto()">‚ö° Process & Resize</button>

                    <div id="p-result" class="preview-box">
                        <img id="p-img-out" class="preview-img">
                        <div id="p-size-tag" style="margin:10px 0; font-weight:bold; color:var(--success);"></div>
                        <a id="p-dl-btn" class="btn btn-download" download>Download Photo</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="sign-panel" class="tool-section">
            <div class="card">
                <div class="upload-zone" onclick="document.getElementById('s-input').click()">
                    <span class="upload-icon">‚úíÔ∏è</span>
                    <div class="upload-text">Upload Signature</div>
                    <input type="file" id="s-input" hidden accept="image/*">
                </div>

                <div id="s-controls" style="display:none; margin-top:20px;">
                    <div class="control-group">
                        <label class="control-label">Black Background Removal</label>
                        <input type="range" id="s-threshold" min="100" max="250" value="160">
                        <p style="font-size:0.8rem; color:var(--text-muted);">Adjust to make background pure white.</p>
                    </div>

                    <button class="btn btn-primary" onclick="processSignature()">‚ö° Clean Signature</button>

                    <div id="s-result" class="preview-box">
                        <img id="s-img-out" class="preview-img" style="border: 1px solid #ccc; background: white;">
                        <a id="s-dl-btn" class="btn btn-download" download>Download Signature</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="doc-panel" class="tool-section">
            <div class="card">
                <div class="upload-zone" onclick="document.getElementById('d-input').click()">
                    <span class="upload-icon">üìÑ</span>
                    <div class="upload-text">Upload Document</div>
                    <input type="file" id="d-input" hidden accept="image/*">
                </div>

                <div id="d-controls" style="display:none; margin-top:20px;">
                    <div class="control-group">
                        <label class="control-label">Filter Mode</label>
                        <select id="d-filter">
                            <option value="original">Original</option>
                            <option value="bw">Black & White (Sharp)</option>
                            <option value="magic">Magic Color (Bright)</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary" onclick="processDoc()">‚ö° Process Document</button>

                    <div id="d-result" class="preview-box">
                        <img id="d-img-out" class="preview-img">
                        <div id="d-size-tag" style="margin:10px 0; color:var(--success);"></div>
                        <a id="d-dl-btn" class="btn btn-download" download>Download Document</a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <p>Developed with ‚ù§Ô∏è by <a href="https://youtube.com/@SheebuTech" target="_blank">Sheebu Tech</a></p>
        <p>100% Secure & Offline Processing</p>
    </footer>

    <div id="toast" class="toast">‚úÖ Action Successful</div>

    <script>
        // --- GLOBAL VARIABLES ---
        let currentFile = null;
        let imgObj = new Image();
        
        // --- UI FUNCTIONS ---
        function switchTab(tab) {
            document.querySelectorAll('.tool-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tab + '-panel').classList.add('active');
            // Find button by text or index logic (simple fix)
            event.target.classList.add('active');
            
            // Reset state slightly
            currentFile = null;
        }

        function showToast(msg, type='success') {
            const t = document.getElementById('toast');
            t.textContent = (type === 'error' ? '‚ùå ' : '‚úÖ ') + msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function formatBytes(bytes) {
            return (bytes / 1024).toFixed(1) + ' KB';
        }

        // --- PRESETS ---
        const presets = {
            ssc: {w: 132, h: 170}, // Approx 3.5x4.5cm @ 96dpi
            upsc: {w: 350, h: 350},
            neet: {w: 132, h: 170},
            pan: {w: 240, h: 336}
        };

        function applyPreset() {
            const val = document.getElementById('p-preset').value;
            if(presets[val]) {
                document.getElementById('p-w').value = presets[val].w;
                document.getElementById('p-h').value = presets[val].h;
            }
        }

        // --- PHOTO LOGIC ---
        const pInput = document.getElementById('p-input');
        pInput.addEventListener('change', (e) => handleFile(e.target.files[0], 'p'));

        function handleFile(file, type) {
            if(!file) return;
            if(!file.type.startsWith('image/')) {
                showToast('Please upload an image file', 'error');
                return;
            }
            currentFile = file;
            const reader = new FileReader();
            reader.onload = (e) => {
                imgObj = new Image();
                imgObj.onload = () => {
                    document.getElementById(type + '-controls').style.display = 'block';
                    if(type === 'p') {
                        document.getElementById('p-w').value = imgObj.width;
                        document.getElementById('p-h').value = imgObj.height;
                        initCrop();
                    }
                };
                imgObj.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // --- CROPPER (Simplified for Mobile) ---
        let cropCanvas = document.getElementById('crop-canvas');
        let ctx = cropCanvas.getContext('2d');
        let cropRect = {x: 20, y: 20, w: 100, h: 100};
        let isDragging = false;

        function initCrop() {
            // Resize canvas to fit screen aspect
            const aspect = imgObj.width / imgObj.height;
            cropCanvas.height = 300;
            cropCanvas.width = 300 * aspect;
            if(cropCanvas.width > window.innerWidth - 60) cropCanvas.width = window.innerWidth - 60;
            
            drawCrop();
        }

        function drawCrop() {
            ctx.clearRect(0,0, cropCanvas.width, cropCanvas.height);
            ctx.drawImage(imgObj, 0, 0, cropCanvas.width, cropCanvas.height);
            
            // Dark overlay
            ctx.fillStyle = 'rgba(0,0,0,0.5)';
            ctx.fillRect(0,0, cropCanvas.width, cropCanvas.height);
            
            // Clear selection
            ctx.clearRect(cropRect.x, cropRect.y, cropRect.w, cropRect.h);
            ctx.drawImage(imgObj, 
                cropRect.x * (imgObj.width/cropCanvas.width), 
                cropRect.y * (imgObj.height/cropCanvas.height),
                cropRect.w * (imgObj.width/cropCanvas.width),
                cropRect.h * (imgObj.height/cropCanvas.height),
                cropRect.x, cropRect.y, cropRect.w, cropRect.h
            );
            
            ctx.strokeStyle = '#38bdf8';
            ctx.lineWidth = 2;
            ctx.strokeRect(cropRect.x, cropRect.y, cropRect.w, cropRect.h);
        }

        // Basic Touch Dragging for Crop Box
        cropCanvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const rect = cropCanvas.getBoundingClientRect();
            const touch = e.touches[0];
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            // Simple center drag logic
            cropRect.x = x - (cropRect.w/2);
            cropRect.y = y - (cropRect.h/2);
            
            // Boundary checks
            if(cropRect.x < 0) cropRect.x = 0;
            if(cropRect.y < 0) cropRect.y = 0;
            if(cropRect.x + cropRect.w > cropCanvas.width) cropRect.x = cropCanvas.width - cropRect.w;
            if(cropRect.y + cropRect.h > cropCanvas.height) cropRect.y = cropCanvas.height - cropRect.h;
            
            drawCrop();
        });

        document.getElementById('crop-toggle').addEventListener('change', (e) => {
            document.getElementById('crop-area').style.display = e.target.checked ? 'block' : 'none';
            if(e.target.checked) initCrop();
        });

        // --- PROCESSING ---
        function processPhoto() {
            if(!imgObj.src) return;
            const canvas = document.createElement('canvas');
            const w = parseInt(document.getElementById('p-w').value) || imgObj.width;
            const h = parseInt(document.getElementById('p-h').value) || imgObj.height;
            canvas.width = w;
            canvas.height = h;
            const ctxFinal = canvas.getContext('2d');

            if(document.getElementById('crop-toggle').checked) {
                // Crop Logic
                const scaleX = imgObj.width / cropCanvas.width;
                const scaleY = imgObj.height / cropCanvas.height;
                ctxFinal.drawImage(imgObj, 
                    cropRect.x * scaleX, cropRect.y * scaleY, 
                    cropRect.w * scaleX, cropRect.h * scaleY, 
                    0, 0, w, h
                );
            } else {
                ctxFinal.drawImage(imgObj, 0, 0, w, h);
            }

            const quality = document.getElementById('p-qual').value / 100;
            const dataUrl = canvas.toDataURL('image/jpeg', quality);
            
            displayResult('p', dataUrl);
        }

        // --- SIGNATURE & DOC LOGIC (Simplified) ---
        document.getElementById('s-input').addEventListener('change', (e) => handleFile(e.target.files[0], 's'));
        document.getElementById('d-input').addEventListener('change', (e) => handleFile(e.target.files[0], 'd'));

        function processSignature() {
            const canvas = document.createElement('canvas');
            canvas.width = imgObj.width;
            canvas.height = imgObj.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(imgObj, 0, 0);
            
            const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imgData.data;
            const threshold = parseInt(document.getElementById('s-threshold').value);

            for (let i = 0; i < data.length; i += 4) {
                const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
                if (avg > threshold) {
                    data[i] = 255; data[i + 1] = 255; data[i + 2] = 255; // White
                } else {
                    // Make ink darker/blacker
                    data[i] = 0; data[i + 1] = 0; data[i + 2] = 0;
                }
            }
            ctx.putImageData(imgData, 0, 0);
            displayResult('s', canvas.toDataURL('image/jpeg'));
        }

        function processDoc() {
            const canvas = document.createElement('canvas');
            canvas.width = imgObj.width;
            canvas.height = imgObj.height;
            const ctx = canvas.getContext('2d');
            const filter = document.getElementById('d-filter').value;
            
            if(filter === 'bw') ctx.filter = 'grayscale(100%) contrast(150%)';
            if(filter === 'magic') ctx.filter = 'saturate(150%) contrast(120%)';
            
            ctx.drawImage(imgObj, 0, 0);
            displayResult('d', canvas.toDataURL('image/jpeg', 0.7));
        }

        function displayResult(type, url) {
            const img = document.getElementById(type + '-img-out');
            img.src = url;
            document.getElementById(type + '-result').style.display = 'block';
            
            // Calculate size roughly
            const head = 'data:image/jpeg;base64,';
            const size = Math.round((url.length - head.length) * 3/4);
            
            if(document.getElementById(type + '-size-tag')) {
                document.getElementById(type + '-size-tag').innerText = "Size: " + formatBytes(size);
            }
            
            const btn = document.getElementById(type + '-dl-btn');
            btn.href = url;
            btn.download = `SheebuTech_${type}_${Date.now()}.jpg`;
            
            showToast('Processed Successfully!');
            img.scrollIntoView({behavior: "smooth"});
        }
    </script>
</body>
                            </html>
                            
