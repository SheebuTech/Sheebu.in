<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SheebuTech Pro ‚Äî Ultimate Student Tools</title>
    <meta name="description" content="Photo Resizer, Image to PDF, and PDF Merger by SheebuTech.">
    <meta name="theme-color" content="#0f172a">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

    <style>
        /* --- 1. MODERN VARIABLES & THEME --- */
        :root {
            --bg-body: #0f172a;       /* Deep Navy */
            --bg-card: rgba(30, 41, 59, 0.7); /* Glass Effect */
            --primary: #38bdf8;       /* Electric Blue */
            --primary-glow: rgba(56, 189, 248, 0.4);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --border: rgba(255, 255, 255, 0.1);
            --success: #22c55e;
            --radius: 16px;
            --font-main: system-ui, -apple-system, sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-main);
            background: var(--bg-body);
            background-image: radial-gradient(circle at 10% 20%, rgba(56, 189, 248, 0.1) 0%, transparent 20%),
                              radial-gradient(circle at 90% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 20%);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            padding-bottom: 80px;
        }

        /* --- 2. HEADER & BRANDING --- */
        header {
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 23, 42, 0.85);
        }

        .brand-logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(to right, #38bdf8, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .tagline { font-size: 0.85rem; color: var(--text-muted); margin-top: 4px; }

        /* --- 3. NAVIGATION TABS (Scrollable) --- */
        .tabs-wrapper {
            overflow-x: auto;
            padding: 15px 0;
            /* Hide scrollbar */
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .tabs-wrapper::-webkit-scrollbar { display: none; }

        .tabs-container {
            display: flex;
            justify-content: start;
            padding: 0 15px;
            gap: 10px;
            min-width: max-content;
        }

        .tab-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab-btn.active {
            background: var(--primary);
            color: #000;
            border-color: var(--primary);
            box-shadow: 0 0 15px var(--primary-glow);
        }

        /* --- 4. MAIN CARD DESIGN --- */
        .container { max-width: 600px; margin: 0 auto; padding: 0 15px; }

        .tool-section {
            display: none;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .tool-section.active { display: block; }

        .card {
            background: var(--bg-card);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 24px;
        }

        /* --- 5. UPLOAD ZONE --- */
        .upload-zone {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(255,255,255,0.02);
            position: relative;
        }
        .upload-zone:hover, .upload-zone:active {
            border-color: var(--primary);
            background: rgba(56, 189, 248, 0.05);
        }
        .upload-icon { font-size: 2.5rem; margin-bottom: 10px; display: block; }
        .upload-text { font-weight: 600; color: var(--primary); }
        .file-count { font-size: 0.8rem; color: var(--success); margin-top: 5px; display: none;}

        /* --- 6. CONTROLS --- */
        .control-group { margin-bottom: 20px; }
        .control-label {
            display: flex; justify-content: space-between;
            font-size: 0.9rem; margin-bottom: 8px; color: var(--text-muted);
        }
        
        input[type="number"], select, input[type="text"] {
            width: 100%;
            padding: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        /* --- 7. BUTTONS --- */
        .btn {
            width: 100%; padding: 16px; border: none; border-radius: 12px;
            font-size: 1rem; font-weight: 700; cursor: pointer;
            transition: transform 0.1s; display: flex;
            align-items: center; justify-content: center; gap: 8px;
            margin-top: 10px;
        }
        .btn:active { transform: scale(0.97); }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), #2563eb);
            color: white;
            box-shadow: 0 4px 15px var(--primary-glow);
        }

        .btn-danger {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.5);
        }
        
        .btn-download {
            background: linear-gradient(135deg, var(--success), #16a34a);
            color: white; margin-top: 15px;
            text-decoration: none;
            display: none; /* Hidden by default */
            text-align: center;
        }

        /* --- 8. PREVIEW BOXES --- */
        .preview-box {
            margin-top: 20px; padding: 15px;
            background: rgba(0,0,0,0.3); border-radius: 12px;
            text-align: center; display: none;
        }
        .preview-img { max-width: 100%; border-radius: 8px; }
        
        /* List for selected files */
        .file-list {
            text-align: left;
            margin-top: 15px;
            font-size: 0.85rem;
            color: var(--text-muted);
            max-height: 150px;
            overflow-y: auto;
        }
        .file-item { padding: 5px 0; border-bottom: 1px solid var(--border); }

        /* --- 9. TOAST & LOADER --- */
        .toast {
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(15, 23, 42, 0.95);
            color: white; padding: 12px 24px; border-radius: 50px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: transform 0.3s;
            z-index: 1000; font-size: 0.9rem; white-space: nowrap;
        }
        .toast.show { transform: translateX(-50%) translateY(0); }

        .loader-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 2000;
            display: none; flex-direction: column;
            justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }
        .spinner {
            width: 40px; height: 40px;
            border: 4px solid var(--border);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        footer { text-align: center; font-size: 0.8rem; color: var(--text-muted); margin-top: 40px; }
        footer a { color: var(--primary); text-decoration: none; }
    </style>
</head>
<body>

    <header>
        <div class="brand-logo">Sheebu Tech</div>
        <div class="tagline">Tools for Students | Made on Mobile</div>
    </header>

    <div class="tabs-wrapper">
        <div class="tabs-container">
            <button class="tab-btn active" onclick="switchTab('photo', this)">Photo Resize</button>
            <button class="tab-btn" onclick="switchTab('img2pdf', this)">Img to PDF</button>
            <button class="tab-btn" onclick="switchTab('merge', this)">Merge PDF</button>
            <button class="tab-btn" onclick="switchTab('sign', this)">Signature</button>
        </div>
    </div>

    <main class="container">
        
        <section id="photo-panel" class="tool-section active">
            <div class="card">
                <div class="upload-zone" onclick="document.getElementById('p-input').click()">
                    <span class="upload-icon">üì∑</span>
                    <div class="upload-text">Upload Photo</div>
                    <div style="font-size:0.8rem; color:var(--text-muted);">Supports JPG, PNG</div>
                    <input type="file" id="p-input" hidden accept="image/*">
                </div>

                <div id="p-controls" style="display:none; margin-top: 20px;">
                    <div class="control-group">
                        <label class="control-label">Exam Preset</label>
                        <select id="p-preset" onchange="applyPreset()">
                            <option value="">Custom Size</option>
                            <option value="ssc">SSC / Railway (3.5 x 4.5 cm)</option>
                            <option value="upsc">UPSC Civil Services</option>
                            <option value="gate">GATE / JEE</option>
                        </select>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="control-group">
                            <label class="control-label">Width (px)</label>
                            <input type="number" id="p-w">
                        </div>
                        <div class="control-group">
                            <label class="control-label">Height (px)</label>
                            <input type="number" id="p-h">
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="processPhoto()">‚ö° Resize & Download</button>

                    <div id="p-result" class="preview-box">
                        <img id="p-img-out" class="preview-img">
                        <div id="p-size-tag" style="margin:10px 0; color:var(--success);"></div>
                        <a id="p-dl-btn" class="btn btn-download" download>Download Image</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="img2pdf-panel" class="tool-section">
            <div class="card">
                <div class="upload-zone" onclick="document.getElementById('i2p-input').click()">
                    <span class="upload-icon">üñºÔ∏è ‚û°Ô∏è üìÑ</span>
                    <div class="upload-text">Select Images</div>
                    <div style="font-size:0.8rem; color:var(--text-muted);">Select Multiple (JPG/PNG)</div>
                    <input type="file" id="i2p-input" hidden accept="image/*" multiple>
                    <div id="i2p-count" class="file-count">0 files selected</div>
                </div>

                <div id="i2p-controls" style="display:none; margin-top:20px;">
                    <div class="file-list" id="i2p-list"></div>
                    
                    <div class="control-group">
                         <label class="control-label">PDF Orientation</label>
                         <select id="i2p-orient">
                             <option value="p">Portrait (Vertical)</option>
                             <option value="l">Landscape (Horizontal)</option>
                         </select>
                    </div>

                    <button class="btn btn-primary" onclick="convertImgToPdf()">‚öôÔ∏è Convert to PDF</button>
                    <a id="i2p-dl-btn" class="btn btn-download">Download PDF</a>
                    <button class="btn btn-danger" onclick="resetTool('i2p')">Clear All</button>
                </div>
            </div>
        </section>

        <section id="merge-panel" class="tool-section">
            <div class="card">
                <div class="upload-zone" onclick="document.getElementById('m-input').click()">
                    <span class="upload-icon">üìÑ ‚ûï üìÑ</span>
                    <div class="upload-text">Select PDFs</div>
                    <div style="font-size:0.8rem; color:var(--text-muted);">Select Multiple PDF files</div>
                    <input type="file" id="m-input" hidden accept="application/pdf" multiple>
                    <div id="m-count" class="file-count">0 files selected</div>
                </div>

                <div id="m-controls" style="display:none; margin-top:20px;">
                    <div class="file-list" id="m-list"></div>
                    
                    <button class="btn btn-primary" onclick="mergePdfs()">üîó Merge PDFs</button>
                    <a id="m-dl-btn" class="btn btn-download">Download Merged PDF</a>
                    <button class="btn btn-danger" onclick="resetTool('m')">Clear All</button>
                </div>
            </div>
        </section>

        <section id="sign-panel" class="tool-section">
            <div class="card">
                <div class="upload-zone" onclick="document.getElementById('s-input').click()">
                    <span class="upload-icon">‚úíÔ∏è</span>
                    <div class="upload-text">Upload Signature</div>
                    <input type="file" id="s-input" hidden accept="image/*">
                </div>

                <div id="s-controls" style="display:none; margin-top:20px;">
                    <div class="control-group">
                        <label class="control-label">Clean Level</label>
                        <input type="range" id="s-threshold" min="100" max="200" value="150" style="width:100%">
                    </div>
                    <button class="btn btn-primary" onclick="processSignature()">‚ú® Clean Background</button>
                    <div id="s-result" class="preview-box">
                        <img id="s-img-out" class="preview-img" style="background:white; padding:5px;">
                        <a id="s-dl-btn" class="btn btn-download" download>Download Signature</a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <p>Developed by <strong>Sheebu Tech</strong></p>
        <p>100% Client-Side Secure</p>
    </footer>

    <div id="toast" class="toast">Action Successful</div>
    <div id="loader" class="loader-overlay">
        <div class="spinner"></div>
        <p style="margin-top:15px; font-weight:bold;">Processing...</p>
    </div>

    <script>
        // --- UTILS ---
        function showLoader(show) { document.getElementById('loader').style.display = show ? 'flex' : 'none'; }
        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = "‚úÖ " + msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function switchTab(tabId, btn) {
            document.querySelectorAll('.tool-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId + '-panel').classList.add('active');
            btn.classList.add('active');
        }

        function resetTool(prefix) {
            document.getElementById(prefix + '-input').value = "";
            document.getElementById(prefix + '-controls').style.display = 'none';
            document.getElementById(prefix + '-dl-btn').style.display = 'none';
            if(document.getElementById(prefix + '-count')) document.getElementById(prefix + '-count').style.display = 'none';
        }

        // --- 1. PHOTO RESIZER LOGIC ---
        let pImg = new Image();
        document.getElementById('p-input').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onload = function(ev) {
                pImg.src = ev.target.result;
                pImg.onload = function() {
                    document.getElementById('p-controls').style.display = 'block';
                    document.getElementById('p-w').value = pImg.width;
                    document.getElementById('p-h').value = pImg.height;
                }
            }
            reader.readAsDataURL(file);
        });

        const presets = { ssc: {w: 132, h: 170}, upsc: {w: 350, h: 350}, gate: {w: 480, h: 640} };
        function applyPreset() {
            const val = document.getElementById('p-preset').value;
            if(presets[val]) {
                document.getElementById('p-w').value = presets[val].w;
                document.getElementById('p-h').value = presets[val].h;
            }
        }

        function processPhoto() {
            const canvas = document.createElement('canvas');
            canvas.width = document.getElementById('p-w').value;
            canvas.height = document.getElementById('p-h').value;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(pImg, 0, 0, canvas.width, canvas.height);
            
            const url = canvas.toDataURL('image/jpeg', 0.85);
            const outImg = document.getElementById('p-img-out');
            outImg.src = url;
            document.getElementById('p-result').style.display = 'block';
            
            const btn = document.getElementById('p-dl-btn');
            btn.href = url;
            btn.download = "SheebuTech_Photo.jpg";
            btn.style.display = "flex";
            
            showToast("Photo Resized!");
        }

        // --- 2. IMAGE TO PDF LOGIC (using jsPDF) ---
        let i2pFiles = [];
        document.getElementById('i2p-input').addEventListener('change', function(e) {
            i2pFiles = Array.from(e.target.files);
            if(i2pFiles.length > 0) {
                document.getElementById('i2p-controls').style.display = 'block';
                document.getElementById('i2p-count').innerText = i2pFiles.length + " files selected";
                document.getElementById('i2p-count').style.display = 'block';
                
                const list = document.getElementById('i2p-list');
                list.innerHTML = "";
                i2pFiles.forEach(f => {
                    list.innerHTML += `<div class="file-item">üì∑ ${f.name}</div>`;
                });
            }
        });

        async function convertImgToPdf() {
            showLoader(true);
            const { jsPDF } = window.jspdf;
            const orientation = document.getElementById('i2p-orient').value;
            const doc = new jsPDF({ orientation: orientation });

            for (let i = 0; i < i2pFiles.length; i++) {
                const dataUrl = await fileToDataURL(i2pFiles[i]);
                const imgProps = doc.getImageProperties(dataUrl);
                const pdfWidth = doc.internal.pageSize.getWidth();
                const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
                
                if (i > 0) doc.addPage();
                doc.addImage(dataUrl, 'JPEG', 0, 0, pdfWidth, pdfHeight);
            }

            const pdfBlob = doc.output('blob');
            const url = URL.createObjectURL(pdfBlob);
            const btn = document.getElementById('i2p-dl-btn');
            btn.href = url;
            btn.download = "SheebuTech_Images.pdf";
            btn.style.display = "flex";
            
            showLoader(false);
            showToast("PDF Created!");
        }

        function fileToDataURL(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.readAsDataURL(file);
            });
        }

        // --- 3. PDF MERGE LOGIC (using PDF-Lib) ---
        let mergeFiles = [];
        document.getElementById('m-input').addEventListener('change', function(e) {
            mergeFiles = Array.from(e.target.files);
            if(mergeFiles.length > 0) {
                document.getElementById('m-controls').style.display = 'block';
                document.getElementById('m-count').innerText = mergeFiles.length + " PDFs selected";
                document.getElementById('m-count').style.display = 'block';
                
                const list = document.getElementById('m-list');
                list.innerHTML = "";
                mergeFiles.forEach(f => {
                    list.innerHTML += `<div class="file-item">üìÑ ${f.name}</div>`;
                });
            }
        });

        async function mergePdfs() {
            if(mergeFiles.length < 2) {
                alert("Please select at least 2 PDF files");
                return;
            }
            showLoader(true);
            try {
                const { PDFDocument } = PDFLib;
                const mergedPdf = await PDFDocument.create();

                for (const file of mergeFiles) {
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await PDFDocument.load(arrayBuffer);
                    const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
                    copiedPages.forEach((page) => mergedPdf.addPage(page));
                }

                const pdfBytes = await mergedPdf.save();
                const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                const url = URL.createObjectURL(blob);
                
                const btn = document.getElementById('m-dl-btn');
                btn.href = url;
                btn.download = "SheebuTech_Merged.pdf";
                btn.style.display = "flex";
                showToast("PDFs Merged!");
            } catch (err) {
                alert("Error merging: " + err.message);
            }
            showLoader(false);
        }

        // --- 4. SIGNATURE CLEANER LOGIC ---
        let sImg = new Image();
        document.getElementById('s-input').addEventListener('change', function(e) {
            const f = e.target.files[0];
            if(!f) return;
            const r = new FileReader();
            r.onload = function(ev) {
                sImg.src = ev.target.result;
                sImg.onload = () => document.getElementById('s-controls').style.display = 'block';
            }
            r.readAsDataURL(f);
        });

        function processSignature() {
            const canvas = document.createElement('canvas');
            canvas.width = sImg.width; 
            canvas.height = sImg.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(sImg, 0, 0);
            
            const imageData = ctx.getImageData(0,0, canvas.width, canvas.height);
            const data = imageData.data;
            const thresh = parseInt(document.getElementById('s-threshold').value);

            for(let i=0; i<data.length; i+=4) {
                const avg = (data[i] + data[i+1] + data[i+2]) / 3;
                if(avg > thresh) {
                    // Make white transparent
                    data[i+3] = 0; 
                } else {
                    // Make ink black
                    data[i] = 0; data[i+1] = 0; data[i+2] = 0;
                }
            }
            ctx.putImageData(imageData, 0, 0);
            
            const url = canvas.toDataURL('image/png');
            const imgOut = document.getElementById('s-img-out');
            imgOut.src = url;
            document.getElementById('s-result').style.display = 'block';
            
            const btn = document.getElementById('s-dl-btn');
            btn.href = url;
            btn.style.display = 'flex';
            showToast("Signature Cleaned!");
        }
    </script>
</body>
    </html>
    
