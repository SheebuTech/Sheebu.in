<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sarkari Form Tool - SheebuTech</title>
    <style>
        /* --- CSS Styles (Mobile Optimized) --- */
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --white: #ffffff;
            --text: #1e293b;
            --border: #cbd5e1;
        }

        body {
            font-family: sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            color: var(--text);
            padding-bottom: 100px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #1e40af, #2563eb);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        header h1 { margin: 0; font-size: 1.5rem; letter-spacing: 1px; }
        header p { margin: 5px 0 0; font-size: 0.9rem; opacity: 0.9; }

        /* Tabs */
        .tabs {
            display: flex;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .tab-btn {
            flex: 1;
            padding: 15px 5px;
            border: none;
            background: none;
            font-weight: bold;
            color: #64748b;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-size: 0.9rem;
        }
        .tab-btn.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            background: #eff6ff;
        }

        /* Container */
        .container {
            padding: 15px;
            max-width: 600px;
            margin: auto;
        }

        .tool-section { display: none; }
        .tool-section.active { display: block; animation: fadeIn 0.3s; }

        /* Cards */
        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }

        /* Upload Area */
        .upload-box {
            border: 2px dashed var(--primary);
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            background: #eff6ff;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
        }
        .upload-box:active { background: #dbeafe; }
        .upload-box p { margin: 0; color: var(--primary); font-weight: bold; }

        /* Inputs */
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.85rem; color: #334155; }
        
        .row { display: flex; gap: 10px; align-items: center; }
        
        input[type="number"], input[type="text"], select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            background: #fff;
        }
        
        /* Sliders */
        input[type="range"] { width: 100%; margin: 10px 0; }

        /* Preview Image */
        .preview-wrapper {
            text-align: center;
            background: #f1f5f9;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
        }
        .preview-img {
            max-width: 100%;
            max-height: 300px;
            border: 1px solid #ccc;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* Converter Box */
        .converter-box {
            background: #fffbeb;
            border: 1px solid #fcd34d;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .converter-box h4 { margin: 0 0 10px 0; font-size: 0.9rem; color: #92400e; }

        /* Buttons */
        .btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-primary { background: var(--primary); }
        .btn-download { background: #16a34a; display: none; text-decoration: none; text-align: center; }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            font-size: 0.85rem;
            color: #64748b;
            border-top: 1px solid #e2e8f0;
            margin-top: 20px;
        }
        footer a { color: var(--primary); text-decoration: none; font-weight: bold; }
        
        .sheebu-brand {
            font-family: monospace;
            background: #1e293b;
            color: #4ade80;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            margin-bottom: 5px;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <h1>Sarkari Form Helper</h1>
        <p>Resize, Compress & Edit (Offline)</p>
    </header>

    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('photo')">Photo</button>
        <button class="tab-btn" onclick="showTab('signature')">Signature</button>
        <button class="tab-btn" onclick="showTab('docs')">Document</button>
    </div>

    <div class="container">

        <div id="photo" class="tool-section active">
            <div class="card">
                <div class="upload-box" onclick="document.getElementById('p-input').click()">
                    <p>üì∑ ‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</p>
                    <input type="file" id="p-input" hidden accept="image/*">
                </div>

                <div id="p-controls" style="display:none;">
                    
                    <div class="converter-box">
                        <h4>üìè CM ‡§∏‡•á Pixel ‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü‡§∞ (Govt Forms)</h4>
                        <div class="row">
                            <input type="number" id="cm-w" placeholder="Width cm (e.g. 3.5)">
                            <input type="number" id="cm-h" placeholder="Height cm (e.g. 4.5)">
                            <button onclick="convertCmToPx()" style="padding: 10px; background: #d97706; color: white; border: none; border-radius: 5px; font-weight: bold;">Set Size</button>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Size (Pixels)</label>
                        <div class="row">
                            <input type="number" id="p-w" placeholder="Width">
                            <input type="number" id="p-h" placeholder="Height">
                        </div>
                        <label style="font-weight: normal; font-size: 0.8rem; margin-top: 5px;">
                            <input type="checkbox" id="p-ratio" checked> ‡§∞‡•á‡§∂‡•ç‡§Ø‡•ã ‡§≤‡•â‡§ï ‡§ï‡§∞‡•á‡§Ç (Lock Aspect Ratio)
                        </label>
                    </div>

                    <div class="input-group">
                        <label>‚òÄÔ∏è ‡§¨‡•ç‡§∞‡§æ‡§á‡§ü‡§®‡•á‡§∏ (Brightness)</label>
                        <input type="range" id="p-bright" min="50" max="150" value="100">
                    </div>

                    <div class="input-group">
                        <label>üìâ Quality (KB ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç)</label>
                        <input type="range" id="p-qual" min="10" max="100" value="80">
                        <p style="font-size:0.8rem; text-align:right;">Quality: <span id="p-qual-val">80</span>%</p>
                    </div>

                    <div class="input-group">
                         <label>‡§´‡§æ‡§á‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ (Optional)</label>
                         <input type="text" id="p-filename" placeholder="e.g. Sheebu_SSC_Photo">
                    </div>

                    <button class="btn btn-primary" onclick="processPhoto()">‡§´‡•ã‡§ü‡•ã ‡§¨‡§®‡§æ‡§è‡§Å (Process)</button>
                    
                    <div class="preview-wrapper" id="p-preview-box" style="display:none;">
                        <img id="p-preview" class="preview-img">
                        <div id="p-size-display" style="margin-top:10px; font-weight:bold; color:var(--primary);"></div>
                        <a id="p-download" class="btn btn-download">‚¨áÔ∏è ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</a>
                    </div>
                </div>
            </div>
        </div>

        <div id="signature" class="tool-section">
            <div class="card">
                <div class="upload-box" onclick="document.getElementById('s-input').click()">
                    <p>‚úíÔ∏è ‡§∏‡§æ‡§á‡§® (Signature) ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</p>
                    <input type="file" id="s-input" hidden accept="image/*">
                </div>

                <div id="s-controls" style="display:none;">
                    <div class="input-group">
                        <label>‚ú® ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§∏‡§æ‡•û ‡§ï‡§∞‡•á‡§Ç (Magic White)</label>
                        <input type="range" id="s-contrast" min="100" max="300" value="150" oninput="liveSignPreview()">
                        <p style="font-size:0.8rem; color:#666;">‡§ï‡§æ‡§≤‡•á ‡§ï‡§æ‡§ó‡§ú ‡§ï‡•ã ‡§∏‡•û‡•á‡§¶ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡•ù‡§æ‡§è‡§Ç</p>
                    </div>

                    <div class="input-group">
                        <label>Size (Width x Height)</label>
                        <div class="row">
                            <input type="number" id="s-w" placeholder="W" value="200">
                            <input type="number" id="s-h" placeholder="H" value="100">
                        </div>
                    </div>

                    <div class="preview-wrapper">
                        <img id="s-preview" class="preview-img" style="display:none;">
                    </div>

                    <button class="btn btn-primary" onclick="processSignature()">Sign ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
                    <a id="s-download" class="btn btn-download">‚¨áÔ∏è ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</a>
                </div>
            </div>
        </div>

        <div id="docs" class="tool-section">
            <div class="card">
                <div class="upload-box" onclick="document.getElementById('d-input').click()">
                    <p>üìÑ ‡§Ü‡§ß‡§æ‡§∞/‡§Æ‡§æ‡§∞‡•ç‡§ï‡§∂‡•Ä‡§ü ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</p>
                    <input type="file" id="d-input" hidden accept="image/*">
                </div>

                <div id="d-controls" style="display:none;">
                    <div class="input-group">
                        <label>Filter Mode</label>
                        <select id="d-mode">
                            <option value="original">Original (No Filter)</option>
                            <option value="bw">Black & White (Clean Text)</option>
                            <option value="magic">High Contrast (Darken Ink)</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Quality / Compression</label>
                        <input type="range" id="d-qual" min="10" max="90" value="60">
                    </div>

                    <button class="btn btn-primary" onclick="processDoc()">‡§°‡•â‡§ï‡•ç‡§Ø‡•Ç‡§Æ‡•á‡§Ç‡§ü ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§ï‡§∞‡•á‡§Ç</button>
                    
                    <div class="preview-wrapper" style="display:none;" id="d-res-box">
                         <img id="d-preview" class="preview-img">
                         <div id="d-size-display" style="margin-top:5px; font-weight:bold;"></div>
                         <a id="d-download" class="btn btn-download">‚¨áÔ∏è ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</a>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <footer>
        <span class="sheebu-brand">Dev: SheebuTech</span>
        <p>100% Secure. No Server Used.</p>
        <p>Problem? <a href="mailto:sheebutechofficial@gmail.com">sheebutechofficial@gmail.com</a></p>
    </footer>

    <script>
        // --- GLOBAL VARIABLES ---
        let pImg = new Image();
        let sImg = new Image();
        let dImg = new Image();

        // --- NAVIGATION ---
        function showTab(tabId) {
            document.querySelectorAll('.tool-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // --- 1. PHOTO LOGIC ---
        document.getElementById('p-input').addEventListener('change', (e) => {
            if(e.target.files && e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = (ev) => {
                    pImg.src = ev.target.result;
                    pImg.onload = () => {
                        document.getElementById('p-controls').style.display = 'block';
                        document.getElementById('p-w').value = pImg.width;
                        document.getElementById('p-h').value = pImg.height;
                    }
                }
                reader.readAsDataURL(e.target.files[0]);
            }
        });

        // CM to Pixel Converter (300 DPI Standard)
        function convertCmToPx() {
            let cmW = parseFloat(document.getElementById('cm-w').value);
            let cmH = parseFloat(document.getElementById('cm-h').value);
            
            if(cmW && cmH) {
                // Formula: (cm * 96) / 2.54 for screen, but for print/forms usually 118-150 px per cm works best as 'web upload'
                // Sarkari forms usually treat 3.5cm as approx 132px (at 96 DPI) or higher at 300 DPI.
                // Let's use a safe standard for upload: 1cm = 38px approx
                
                let pxW = Math.round(cmW * 37.8); 
                let pxH = Math.round(cmH * 37.8);
                
                document.getElementById('p-w').value = pxW;
                document.getElementById('p-h').value = pxH;
                alert(`Size Set: ${pxW}x${pxH} Pixels`);
            } else {
                alert("Please enter CM values");
            }
        }

        // Maintain Aspect Ratio Logic
        document.getElementById('p-w').addEventListener('input', (e) => {
            if(document.getElementById('p-ratio').checked && pImg.width > 0) {
                let ratio = pImg.height / pImg.width;
                document.getElementById('p-h').value = Math.round(e.target.value * ratio);
            }
        });

        document.getElementById('p-qual').addEventListener('input', (e) => document.getElementById('p-qual-val').innerText = e.target.value);

        function processPhoto() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            let w = parseInt(document.getElementById('p-w').value) || pImg.width;
            let h = parseInt(document.getElementById('p-h').value) || pImg.height;
            canvas.width = w;
            canvas.height = h;

            // Apply Filters (Brightness)
            let bright = document.getElementById('p-bright').value;
            ctx.filter = `brightness(${bright}%)`;

            ctx.drawImage(pImg, 0, 0, w, h);
            
            // Output
            let quality = parseInt(document.getElementById('p-qual').value) / 100;
            const dataUrl = canvas.toDataURL('image/jpeg', quality);
            
            // Show result
            document.getElementById('p-preview-box').style.display = 'block';
            document.getElementById('p-preview').src = dataUrl;
            
            // Calculate KB
            const kb = Math.round((dataUrl.length - 22) * 3 / 4 / 1024);
            document.getElementById('p-size-display').innerText = `Estimated Size: ${kb} KB`;
            
            // Download Button
            const dlBtn = document.getElementById('p-download');
            let uName = document.getElementById('p-filename').value || "SheebuTech_Photo";
            if(!uName.endsWith('.jpg')) uName += ".jpg";
            
            dlBtn.href = dataUrl;
            dlBtn.download = uName;
            dlBtn.style.display = 'block';
        }


        // --- 2. SIGNATURE LOGIC ---
        document.getElementById('s-input').addEventListener('change', (e) => {
            if(e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = (ev) => {
                    sImg.src = ev.target.result;
                    sImg.onload = () => {
                        document.getElementById('s-controls').style.display = 'block';
                        document.getElementById('s-preview').style.display = 'block';
                        document.getElementById('s-preview').src = sImg.src;
                    }
                }
                reader.readAsDataURL(e.target.files[0]);
            }
        });

        function liveSignPreview() {
            let val = document.getElementById('s-contrast').value;
            document.getElementById('s-preview').style.filter = `contrast(${val}%) grayscale(100%)`;
        }

        function processSignature() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            let w = parseInt(document.getElementById('s-w').value);
            let h = parseInt(document.getElementById('s-h').value);
            canvas.width = w;
            canvas.height = h;
            
            // Apply hard filter
            let cont = document.getElementById('s-contrast').value;
            ctx.filter = `contrast(${cont}%) grayscale(100%)`;
            
            ctx.drawImage(sImg, 0, 0, w, h);
            
            const dataUrl = canvas.toDataURL('image/jpeg', 0.7);
            
            document.getElementById('s-preview').src = dataUrl;
            document.getElementById('s-preview').style.filter = 'none'; // remove CSS filter since image is baked
            
            const dlBtn = document.getElementById('s-download');
            dlBtn.href = dataUrl;
            dlBtn.download = "Sign_SheebuTech.jpg";
            dlBtn.style.display = 'block';
        }


        // --- 3. DOCUMENT LOGIC ---
        document.getElementById('d-input').addEventListener('change', (e) => {
            if(e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = (ev) => {
                    dImg.src = ev.target.result;
                    dImg.onload = () => {
                        document.getElementById('d-controls').style.display = 'block';
                    }
                }
                reader.readAsDataURL(e.target.files[0]);
            }
        });

        function processDoc() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = dImg.width;
            canvas.height = dImg.height;
            
            let mode = document.getElementById('d-mode').value;
            if(mode === 'bw') ctx.filter = "grayscale(100%) contrast(120%)";
            if(mode === 'magic') ctx.filter = "contrast(150%) brightness(110%)";
            
            ctx.drawImage(dImg, 0, 0);
            
            let qual = parseInt(document.getElementById('d-qual').value) / 100;
            const dataUrl = canvas.toDataURL('image/jpeg', qual);
            
            document.getElementById('d-res-box').style.display = 'block';
            document.getElementById('d-preview').src = dataUrl;
            
            const kb = Math.round((dataUrl.length - 22) * 3 / 4 / 1024);
            document.getElementById('d-size-display').innerText = `Size: ${kb} KB`;
            
            const dlBtn = document.getElementById('d-download');
            dlBtn.href = dataUrl;
            dlBtn.download = "Doc_SheebuTech.jpg";
            dlBtn.style.display = 'block';
        }

    </script>
</body>
</html>
